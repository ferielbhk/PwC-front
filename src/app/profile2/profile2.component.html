
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- IconScout CDN -->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v2.1.6/css/unicons.css">
    <!-- Stylesheet -->
  
</head><app-navbar></app-navbar>
<div class="cl">
<div class="container ">
<div class="profile-page tx-13">
    <div class="row">
        <div class="col-12 grid-margin">
            <div class="profile-header">
                <div class="cover">
                    <div class="gray-shade"></div>
                    <figure>
                        <img src="https://bootdey.com/img/Content/bg1.jpg" class="img-fluid " style="height: 370px;" alt="profile cover">
                    </figure>
                    
                </div>
                <div class="cover-body d-flex justify-content-between align-items-center" style="background-color: white;">
                    <div class=" mt-2 mb-2 mx-2">
                        <img class="profile-pic"  [src]="'data:image/png;base64,'+user.image " class="rounded-circle mx-2" alt="Profile" style="width: 70px; height: 70px;">
                        <span class="profile-name mx-2" style="font-weight: bold;">{{user.firstname}} {{user.lastname}}</span>
                    </div>
                    
                </div>
                
            </div>
        </div>
    </div>
    <div class="row profile-body">
        <!-- left wrapper start -->
        <div class="d-none d-md-block col-md-4 col-xl-3 left-wrapper">
            <div class="card rounded">
                <div class="card-body">
                    
                   
                    <div class="mt-3">
                        <label class="tx-11   mb-0 text-uppercase" style="font-weight: bold;">Email:</label>
                        <p class="text-muted">{{user.email}}</p>
                    </div>
                    <div class="mt-3">
                        <label class="tx-11  mb-0 text-uppercase" style="font-weight: bold;">Phone Number:</label>
                        <p class="text-muted">{{user.tel}}</p>
                    </div>
                    <div class="mt-3">
                        <label class="tx-11  mb-0 text-uppercase" style="font-weight: bold;">Connected From :</label>
                        <p class="text-muted">{{ timeDifference }}</p>
                    </div>
                   
                    <div class="d-flex align-items-center justify-content-between mb-2" >
                        <h6 class="card-title mb-0" style="font-weight: bold;">ABOUT</h6>
                        
                    </div>
                    <p>{{user.informations}}.</p>
                    
                   
                </div>
            </div>
        </div>
        <div class="col-md-8 col-xl-6 middle-wrapper">
            <div class="row">
                <div class="col-md-12 grid-margin">
                    <div class="card rounded">
                        <div class="card-header">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">

                                    <form  (ngSubmit)="onSubmit()" enctype="multipart/form-data"  class="feed">
                                        <div class="d-flex align-items-center">
                                          <img [src]="'data:image/png;base64,'+user.image " class="rounded-circle mx-2" alt="Profile" style="width: 70px; height: 70px;">
                                          <h6><span class=" d-lg-inline " style="font-weight: bold;">{{user.firstname}} {{user.lastname}}</span></h6>
                                      </div>
                                          <div class="form-group mt-2">
                                            <input id="content"[(ngModel)]="content" name="content"   placeholder="WHAT'S ON YOUR MIND ?"  class="form-control inputpost mb-2 " required>            
                                            <input type="file" id="image" (change)="onFileSelected($event)"  class="form-control w-70 h-70" >
                                          </div>
                                          <button type="submit" class="btn btn-primary mt-3">Post</button>
                                      </form>
                                      
                                </div>



                                
                            </div>

                            </div>
                        </div>
                        
                        
                    </div>
                </div>
                <div >
                    <div class="col-md-12 mb-3">
                      <div *ngFor="let post of posts" class="card rounded mb-3" >
                        <div class="card-header">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">
                                    <img [src]="'data:image/png;base64,'+user.image " class="rounded-circle mx-1" alt="Profile" style="width: 70px; height: 70px;">
                                    <div class="ml-2" style="font-weight: bold;">
                                        <p>{{user.firstname}} {{user.lastname}}</p>
                                    </div>
                                </div>
                               
                            </div>
                        </div>
                        <div class="card-body" >
                            <p *ngIf="post?.content"  class="mb-2 tx-14">{{post.content}}</p>
                           
                                                <img *ngIf="post?.image"  class="img-fluid d-flex align-items-center justify-content-center mx-4 px-4 "  [src]="'data:image/png;base64,'+post.image "  style="height: 250px; width: 520px;" alt="">
                                                      </div>

                                                      <div class="action-buttons">
                                                        <div class="interaction-buttons mx-2">
                                                          <span class="liked-by"></span>
                                                          <span><fa-icon (click)="toggleLike(post)"
                                                            [icon]="post.isLiked ? faHeartSolid : faHeartOutline"  class="heart-icon"   [ngClass]="{ liked: post.isLiked }"  ></fa-icon> </span>
                                                        </div>
                                                      </div>
                                                      <div class="liked-by mx-2 ">
                                                        {{ post.likes }} Likes  ~  {{post.commentaires}} Comments</div>
                                                        <div class="form-group mt-2">
                                                          <input [(ngModel)]="post.currentComment"  placeholder="COMMENT THIS POST ?" class="form-control inputcomment mx-2 " required>
                                                          <button (click)="createComment(post.id)" class="btn btn-primary mt-3 mb-3 mx-2 ">Comment</button>
                                                        </div>
                                                      <div>
                                                        <div class="comment ">
                                                          <div class="commentairee my-2 rounded" *ngFor="let commentt of post.comments">
                                                            <div class="d-flex align-items-center py-1">
                                                                <img [src]="'data:image/png;base64,'+commentt.user.image " class="rounded-circle mx-2" style="width: 40px; height: 40px;">
                                                                <h6 class="my-1 " style="color: rgb(255, 94, 0)" >{{ commentt.user.firstname }} {{commentt.user.lastname}}</h6>                    
                                                            </div>
                                                            <div class=" mx-2" style="color: rgb(6, 6, 7)">
                                                              <p>{{ commentt.content }}</p> 
                                                            </div>
                                                          </div>
                                                        </div>

                        
                            </div>



                           
                          




                    </div>
            </div>
        </div>  </div>
        <!-- middle wrapper end -->
        <ng-template #myModalContent let-modal>

            <div class="modal-header">
                <button type="button" class="close" (click)="modal.dismiss()">
                    <span>&times;</span>
                </button>
            </div>
        
            <div class="modal-body">
            </div>
        
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="modal.close()">Close</button>
            </div>
        
        </ng-template>
        <!-- right wrapper start -->
        <div class="d-none d-xl-block col-xl-3 right-wrapper">
            <div class="row">
                <div class="col-md-12 grid-margin" >
                    <div class="card rounded">
                        <div class="card-body" >
                            <h6 class="card-title" style="font-weight: bold;">Latest Photos</h6>
                            <div class="latest-photos-container">
                                <div  class="latest-photos">
                                  <div *ngFor="let post of postsFiltred"  class="latest-photo-item">
                                    <figure  class="mb-0">
                                      <img [src]="'data:image/png;base64,'+post?.image" >
                                    </figure>
                                  </div>
                                </div>
                              </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12 grid-margin">
                    <div class="card rounded">
                        <div class="card-body">
                            <h6 class="card-title mb-3" style="font-weight: bold;">Suggestions For You</h6>
                   
                            <div *ngFor="let user of users" class="d-flex justify-content-between mb-3" (click)="goToUserProfile(user.id)">
                                <div class="d-flex align-items-center hover-pointer">
                                    <img class="img-xs rounded-circle mx-2"  [src]="'data:image/png;base64,'+user.image" alt="">

                                    <div class="ml-2" (click)="goToUserProfile(user.id)">
                                        <p>{{user.firstname}} {{user.lastname}}</p>
                                    </div>
                                </div>
                               
                            </div>

                        </div>
                    </div>





                   






                </div>
            </div>
      
        <!-- right wrapper end -->
    </div>
</div></div>